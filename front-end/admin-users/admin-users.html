<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Gerenciar usu√°rios</title>
</head>


<body>
    
    <div id="users">
    </div>
   
</body>


<script>

    const divUsers = document.getElementById("users")
    var users = []

   
    var URLedit = "../user-update/user-update.html"


    axios.get('http://localhost:3000/users').then((response)=>{
        console.log(response)
        users = response.data
        
        console.log(users)
        users.forEach((i)=>{
            console.log(i.email)
             
            divUsers.innerHTML += i.name + 
            '<button onClick="editUser(\'' + i.email + '\')">Editar</button> <button onClick="removeUser(\'' + i.email + '\')">Remover</button> <br>';

        })

    }).catch((error)=>{
        console.log(error)
    })

    console.log(users)

    function editUser(email){
        console.log(email)
        localStorage.setItem("email", email)
        window.location.href = URLedit
    }

    function removeUser(email){
        console.log(email)
        axios.delete(`http://localhost:3000/users/${email}`).then((response)=>{
            console.log(response)
        }).catch((error)=>{
            console.log(error)
        })
    }

</script>
</html>